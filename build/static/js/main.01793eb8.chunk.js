(this.webpackJsonpletmeask=this.webpackJsonpletmeask||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},27:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},50:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var r=n(3),a=n.n(r),c=n(28),s=n.n(c),i=n(5),o=n.n(i),u=n(9),l=n(8),d=n.p+"static/media/illustration.ae7276f0.svg",j=n.p+"static/media/logo.a88331cb.svg",h=n.p+"static/media/google-icon.df15d8e5.svg",b=n(30),p=n(31),m=n(1);function x(e){var t=e.isOutlined,n=void 0!==t&&t,r=Object(p.a)(e,["isOutlined"]);return Object(m.jsx)("button",Object(b.a)({className:"button ".concat(n?" outlined":"")},r))}n(24),n(25);var f=n(6),O=n(18);n(38),n(40);O.a.initializeApp({apiKey:"AIzaSyByF-Q0owhDcV_yTytagr1O4BcIUW9yz0I",authDomain:"letmeask-cfa87.firebaseapp.com",databaseURL:"https://letmeask-cfa87-default-rtdb.firebaseio.com",projectId:"letmeask-cfa87",storageBucket:"letmeask-cfa87.appspot.com",messagingSenderId:"28201384546",appId:"1:28201384546:web:cfbeeb54e6ce9c11e5af3b"});var v=O.a.auth(),g=O.a.database(),k=Object(r.createContext)({});function w(e){Object(r.useEffect)((function(){var e=v.onAuthStateChanged((function(e){if(e){var t=e.displayName,n=e.photoURL,r=e.uid;if(!t||!r||!n)throw new Error("Usu\xe1rio sem nome ou sem ID");c({id:r,name:t,avatar:n})}}));return function(){e()}}),[]);var t=Object(r.useState)(),n=Object(u.a)(t,2),a=n[0],c=n[1];function s(){return(s=Object(l.a)(o.a.mark((function e(){var t,n,r,a,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new O.a.auth.GoogleAuthProvider,e.next=3,v.signInWithPopup(t);case 3:if(!(n=e.sent).user){e.next=9;break}if(r=n.user,a=r.displayName,s=r.photoURL,i=r.uid,a&&i&&s){e.next=8;break}throw new Error("Usu\xe1rio sem nome ou sem ID");case 8:c({id:i,name:a,avatar:s});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsx)(k.Provider,{value:{user:a,loginWithGoogle:function(){return s.apply(this,arguments)}},children:e.children})}function y(){return Object(r.useContext)(k)}function C(){var e=Object(f.f)(),t=y(),n=t.user,a=t.loginWithGoogle;function c(){return(c=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return t.next=3,a();case 3:e.push("/rooms/new");case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var s=Object(r.useState)(""),i=Object(u.a)(s,2),b=i[0],p=i[1];function O(){return(O=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log(b)," "!==b.trim()){t.next=4;break}return t.abrupt("return");case 4:return t.next=7,g.ref("rooms/".concat(b)).get();case 7:if(t.sent.exists()){t.next=11;break}return alert("Room does not exists"),t.abrupt("return");case 11:e.push("/rooms/".concat(b));case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-auth",children:[Object(m.jsxs)("aside",{children:[Object(m.jsx)("img",{src:d,alt:""}),Object(m.jsx)("strong",{children:"Um simples texto de teste"}),Object(m.jsx)("p",{children:"Um simples texto de teste. Um simples texto de teste"})]}),Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:"main-content",children:[Object(m.jsx)("img",{src:j,alt:""}),Object(m.jsxs)("button",{className:"create-room",onClick:function(){return c.apply(this,arguments)},children:[" ",Object(m.jsx)("img",{src:h,alt:""}),"Entre na sala com Google"]}),Object(m.jsx)("div",{className:"separator",children:"Ou entre numa sala"}),Object(m.jsxs)("form",{onSubmit:function(e){return O.apply(this,arguments)},children:[Object(m.jsx)("input",{type:"text",placeholder:"Nome da sala",onChange:function(e){p(e.target.value)},value:b}),Object(m.jsx)(x,{type:"submit",children:"Entrar na sala"})]})]})})]})}var N=n(16);function q(){var e=y().user,t=Object(r.useState)(""),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(f.f)();function i(){return(i=Object(l.a)(o.a.mark((function t(n){var r,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),console.log(a)," "!==a.trim()){t.next=4;break}return t.abrupt("return");case 4:return r=g.ref("rooms"),t.next=8,r.push({roomName:a,authorID:null===e||void 0===e?void 0:e.id});case 8:c=t.sent,s.push("/rooms/".concat(c.key));case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-auth",children:[Object(m.jsxs)("aside",{children:[Object(m.jsx)("img",{src:d,alt:""}),Object(m.jsx)("strong",{children:"Um simples texto de teste"}),Object(m.jsx)("p",{children:"Um simples texto de teste. Um simples texto de teste"})]}),Object(m.jsx)("main",{children:Object(m.jsxs)("div",{className:"main-content",children:[Object(m.jsx)("img",{src:j,alt:""}),Object(m.jsx)("br",{}),Object(m.jsx)("h1",{children:null===e||void 0===e?void 0:e.name}),Object(m.jsx)("h2",{children:"Criar um nova sala"}),Object(m.jsxs)("form",{onSubmit:function(e){return i.apply(this,arguments)},children:[Object(m.jsx)("input",{type:"text",onChange:function(e){c(e.target.value)},value:a,placeholder:"Nome da sala"}),Object(m.jsx)(x,{type:"submit",children:"Criar sala"})]}),Object(m.jsxs)("p",{children:["Quer entrar em uma sala existente? ",Object(m.jsx)(N.b,{to:"/",children:"Clique aqui"})]})]})})]})}n(48),n(27);var A=n.p+"static/media/copy.2f36f99e.svg";n(49);function I(e){return Object(m.jsxs)("button",{onClick:function(){navigator.clipboard.writeText(e.roomCode)},className:"room-code",children:[Object(m.jsx)("div",{children:Object(m.jsx)("img",{src:A,alt:"Copy Room Code"})}),Object(m.jsx)("span",{children:e.roomCode})]})}n(50);function S(e){var t=e.content,n=e.author,r=e.isAnswered,a=void 0!==r&&r,c=e.isHighlighted,s=void 0!==c&&c,i=e.children;return Object(m.jsxs)("div",{className:"question ".concat(a?"answered":""," ").concat(s&&!a?"highlighted":""),children:[Object(m.jsx)("p",{children:t}),Object(m.jsxs)("footer",{children:[Object(m.jsxs)("div",{className:"user-info",children:[Object(m.jsx)("img",{src:n.avatar,alt:n.name}),Object(m.jsx)("span",{children:n.name})]}),Object(m.jsx)("div",{children:i})]})]})}function H(e){var t=y().user,n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),o=Object(u.a)(i,2),l=o[0],d=o[1];return Object(r.useEffect)((function(){var n=g.ref("/rooms/".concat(e));return console.log(n),n.on("value",(function(e){var n,r=e.val(),a=null!==(n=r.question)&&void 0!==n?n:{},c=Object.entries(a).map((function(e){var n,r,a,c=Object(u.a)(e,2),s=c[0],i=c[1];return{id:s,author:{avatar:i.author.avatar,name:i.author.name},content:i.content,isAnswered:i.isAnswered,isHighlighted:i.isHighlighted,likeCount:Object.values(null!==(n=i.likes)&&void 0!==n?n:{}).length,likeId:null===(r=Object.entries(null!==(a=i.likes)&&void 0!==a?a:{}).find((function(e){var n=Object(u.a)(e,2);n[0];return n[1].authorId===(null===t||void 0===t?void 0:t.id)})))||void 0===r?void 0:r[0]}}));d(r.roomName),s(c)})),function(){n.off("value")}}),[e,null===t||void 0===t?void 0:t.id]),{questions:c,title:l}}function U(){var e=y().user,t=Object(f.g)().id,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=H(t),d=i.questions,h=i.title;function b(){return(b=Object(l.a)(o.a.mark((function n(r,a){return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!a){n.next=5;break}return n.next=3,g.ref("/rooms/".concat(t,"/question/").concat(r,"/likes/").concat(a)).remove();case 3:n.next=7;break;case 5:return n.next=7,g.ref("/rooms/".concat(t,"/question/").concat(r,"/likes")).push({authorID:null===e||void 0===e?void 0:e.id});case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function n(r){var a;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault()," "!==c){n.next=3;break}return n.abrupt("return");case 3:return a={content:c,author:{name:null===e||void 0===e?void 0:e.name,avatar:null===e||void 0===e?void 0:e.avatar},isHighlighted:!1,isAnswered:!1},n.next=6,g.ref("rooms/".concat(t,"/question")).push(a);case 6:s("");case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-room",children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("img",{src:j,alt:"Letmeask"}),Object(m.jsx)(I,{roomCode:t})]})}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"room-title",children:[Object(m.jsxs)("h1",{children:["Sala ",h]}),d.length>0&&Object(m.jsxs)("span",{children:[d.length," pergunta(s)"]})]}),Object(m.jsxs)("form",{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(m.jsx)("textarea",{placeholder:"Qual \xe9 a sua pergunta?",onChange:function(e){s(e.target.value)},value:c}),Object(m.jsxs)("div",{className:"form-footer",children:[e?Object(m.jsxs)("div",{className:"user-info",children:[Object(m.jsx)("img",{src:e.avatar,alt:e.name}),Object(m.jsx)("span",{children:e.name})]}):Object(m.jsxs)("span",{children:["Para enviar uma pergunta,  ",Object(m.jsx)("button",{children:"fa\xe7a seu login"})," ."]}),Object(m.jsx)(x,{type:"submit",disabled:!e,children:"Enviar Pergunta"})]})]}),Object(m.jsxs)("div",{className:"question-list",children:[d.map((function(e){return Object(m.jsx)(S,{content:e.content,author:e.author,isAnswered:e.isAnswered,isHighlighted:e.isHighlighted,children:!e.isAnswered&&Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("button",{className:"like-button ".concat(e.likeId?" liked":""),type:"button","area-label":"marcar como 'gostei'",onClick:function(){!function(e,t){b.apply(this,arguments)}(e.id,e.likeId)},children:[e.likeCount>0&&Object(m.jsx)("span",{children:e.likeCount}),Object(m.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(m.jsx)("path",{d:"M7 22H4C3.46957 22 2.96086 21.7893 2.58579 21.4142C2.21071 21.0391 2 20.5304 2 20V13C2 12.4696 2.21071 11.9609 2.58579 11.5858C2.96086 11.2107 3.46957 11 4 11H7M14 9V5C14 4.20435 13.6839 3.44129 13.1213 2.87868C12.5587 2.31607 11.7956 2 11 2L7 11V22H18.28C18.7623 22.0055 19.2304 21.8364 19.5979 21.524C19.9654 21.2116 20.2077 20.7769 20.28 20.3L21.66 11.3C21.7035 11.0134 21.6842 10.7207 21.6033 10.4423C21.5225 10.1638 21.3821 9.90629 21.1919 9.68751C21.0016 9.46873 20.7661 9.29393 20.5016 9.17522C20.2371 9.0565 19.9499 8.99672 19.66 9H14Z",stroke:"#737380",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})]})})},e.id)})),";"]})]})]})}var D=n.p+"static/media/delete.22ba6e00.svg",E=n.p+"static/media/check.5dfa6ed6.svg",L=n.p+"static/media/answer.4502a8d5.svg";function B(){y().user;var e=Object(f.g)().id,t=Object(r.useState)(""),n=Object(u.a)(t,2),a=(n[0],n[1],H(e)),c=a.questions,s=a.title,i=Object(f.f)();function d(){return(d=Object(l.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ref("/rooms/".concat(e)).update({endedAt:new Date});case 2:i.push("/");case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Voc\xea quer mesmo deletar essa pergunta?")){t.next=3;break}return t.next=3,g.ref("/rooms/".concat(e,"/question/").concat(n)).remove();case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ref("rooms/".concat(e,"/question/").concat(n)).update({isAnswered:!0});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(){return(p=Object(l.a)(o.a.mark((function t(n){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.ref("rooms/".concat(e,"/question/").concat(n)).update({isHighlighted:!0});case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(m.jsxs)("div",{id:"page-room",children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"content",children:[Object(m.jsx)("img",{src:j,alt:"Letmeask"}),Object(m.jsxs)("div",{children:[Object(m.jsx)(I,{roomCode:e}),Object(m.jsx)(x,{onClick:function(){return d.apply(this,arguments)},isOutlined:!0,children:"Encerrar sala"})]})]})}),Object(m.jsxs)("main",{children:[Object(m.jsxs)("div",{className:"room-title",children:[Object(m.jsxs)("h1",{children:["Sala ",s]}),c.length>0&&Object(m.jsxs)("span",{children:[c.length," pergunta(s)"]})]}),Object(m.jsxs)("div",{className:"question-list",children:[c.map((function(e){return Object(m.jsxs)(S,{content:e.content,author:e.author,isAnswered:e.isAnswered,isHighlighted:e.isHighlighted,children:[!e.isAnswered&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{type:"button",onClick:function(){return function(e){return b.apply(this,arguments)}(e.id)},children:Object(m.jsx)("img",{src:E,alt:"marcar pergunta com respondida"})}),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e){return p.apply(this,arguments)}(e.id)},children:Object(m.jsx)("img",{src:L,alt:"dar destaque \xe0 pergunta"})})]}),Object(m.jsx)("button",{type:"button",onClick:function(){return function(e){return h.apply(this,arguments)}(e.id)},children:Object(m.jsx)("img",{src:D,alt:"delete"})})]},e.id)})),";"]})]})]})}var P=function(){return Object(m.jsx)(N.a,{children:Object(m.jsx)(w,{children:Object(m.jsxs)(f.c,{children:[Object(m.jsx)(f.a,{path:"/",exact:!0,component:C}),Object(m.jsx)(f.a,{path:"/rooms/new",component:q}),Object(m.jsx)(f.a,{path:"/rooms/:id",component:U}),Object(m.jsx)(f.a,{path:"/admin/rooms/:id",component:B})]})})})};s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.01793eb8.chunk.js.map